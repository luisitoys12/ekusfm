<!DOCTYPE html>
<html lang="es">
<head>
    <title>Estación KUSFM - Versión Pro</title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <meta name="theme-color" content="#453D79">
    <!-- Bootstrap 5 -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Font Awesome -->
    <script src="https://kit.fontawesome.com/5db384e8a3.js" crossorigin="anonymous"></script>
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Roboto', Arial, sans-serif;
            background: linear-gradient(130deg, #ffe082 0%, #e1bee7 100%);
            color: #222;
        }
        .summer-banner {
            background: url('https://i.imgur.com/TmDxU1X.png') center/cover no-repeat;
            border-radius: 15px;
            min-height: 130px;
            margin-bottom: 2rem;
            box-shadow: 0 4px 22px #c19c5e66;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        .summer-banner h1 {
            color: #fff176;
            text-shadow: 2px 2px 6px #e65100, 0 2px 12px #fffbe7;
            font-size: 2.3rem;
            font-weight: 900;
            margin: 0;
        }
        .player-bg {
            background: url('https://i.imgur.com/TmDxU1X.png') center/cover no-repeat;
            border-radius: 20px;
            padding: 2rem 1rem 1rem 1rem;
            box-shadow: 0 2px 22px #e6510022;
        }
        .marquee {
            background: #fffde7cc;
            color: #e65100;
            border-radius: 10px;
            margin: 10px 0;
            padding: 8px 0;
            font-weight: bold;
            font-size: 1.1rem;
        }
        .section-title {
            background: linear-gradient(90deg, #fffde7, #ffe082 90%);
            color: #e65100;
            font-weight: bold;
            border-radius: 7px;
            padding: 6px 18px;
            margin-bottom: 18px;
            border-left: 6px solid #ff9100;
            box-shadow: 0 2px 8px #ffd54f33;
        }
        .avatar-habbo {
            background: #fffde7;
            border-radius: 8px;
            padding: 2px;
            max-width: 80px;
            box-shadow: 0 2px 10px #ffe08299;
        }
        .bg-orange-glass {
            background: rgba(255,193,7,0.14);
            border-radius: 10px;
        }
        .team-role {
            font-size: 1.15em;
            font-weight: bold;
            color: #f57c00;
        }
        .team-member {
            border: 1px solid #ffe0b2;
            border-radius: 10px;
            background: #fffde7;
            padding: 10px;
            margin-bottom: 12px;
        }
        .request-card {
            background: #ffecb3;
            border-radius: 12px;
            padding: 1rem;
            margin-bottom: 1rem;
            box-shadow: 0 2px 10px #ffe08233;
        }
        .dj-panel, .admin-panel {
            background: #fffde7;
            border-radius: 12px;
            padding: 1rem 1.5rem;
            margin-bottom: 1.5rem;
            box-shadow: 0 2px 8px #ffe08255;
        }
        .badge-habbo {
            height: 40px;
            margin-right: 8px;
            vertical-align: middle;
        }
        .summer-icon {
            font-size: 2.2em;
            color: #ffa726;
            margin: 0 10px;
            vertical-align: middle;
            filter: drop-shadow(1px 3px 2px #fff9c4);
        }
        .mb-6 { margin-bottom: 3rem !important;}
        .form-label { font-weight: 500; color: #e65100;}
        .form-control, .form-select { background: #fffde7;}
        /* Scrollbar */
        ::-webkit-scrollbar {width: 10px; background: #ffe082;}
        ::-webkit-scrollbar-thumb {background: #ffb300; border-radius: 5px;}
        /* Responsive */
        @media (max-width: 700px) {
            .player-bg {padding: 1rem;}
            .summer-banner h1 {font-size: 1.3rem;}
        }
    </style>
</head>
<body>
    <!-- Summer banner -->
    <div class="container summer-banner my-4">
        <h1><i class="fas fa-umbrella-beach summer-icon"></i>Estación KUSFM - Verano 2025<i class="fas fa-ice-cream summer-icon"></i></h1>
    </div>

    <!-- Marquee Noticias -->
    <div class="container mb-2">
        <div class="marquee" id="marqueeNoticias">
            ¡Bienvenido a EKUSFM! 🌴 Participa en nuestros eventos de verano y pide tu canción favorita aquí abajo.
        </div>
    </div>

    <!-- Player principal -->
    <div class="container player-bg mb-4">
        <div class="row align-items-center">
            <div class="col-md-2 text-center mb-3 mb-md-0">
                <img id="player-avatar" src="https://www.habbo.es/habbo-imaging/avatarimage?img_format=png&user=estacionkusfm&direction=2&head_direction=3&size=l&gesture=sml&action=std" class="avatar-habbo" alt="DJ Avatar">
            </div>
            <div class="col-md-6">
                <h4 id="player-dj">Cargando DJ...</h4>
                <div id="player-show">Cargando programa...</div>
                <div id="player-listeners"><i class="fas fa-headphones"></i> <span id="listeners-count">0</span> oyentes</div>
                <div class="d-flex align-items-center mt-2">
                    <button class="btn btn-warning me-2" id="btnPlay"><i class="fas fa-play"></i></button>
                    <button class="btn btn-warning me-2" id="btnMute"><i class="fas fa-volume-up"></i></button>
                    <input type="range" id="volume-slider" min="0" max="100" value="80" class="form-range" style="width:120px;">
                </div>
            </div>
            <div class="col-md-4">
                <img id="album-art" src="https://i.imgur.com/ITZcSUM.png" alt="Album Art" style="width:100px;border-radius:10px;box-shadow:0 1px 8px #fffde7;">
                <div><b id="song-title">Cargando...</b></div>
                <div id="song-artist">Cargando...</div>
            </div>
        </div>
        <audio id="player_audio" preload="auto"></audio>
        <div class="marquee mt-3" id="marquee_radio">
            Estación KUSFM - Cargando...
        </div>
    </div>

    <!-- Panel Peticiones -->
    <div class="container mb-4">
        <div class="section-title"><i class="fas fa-envelope-open-text"></i> Peticiones al DJ</div>
        <form id="petitionForm" class="bg-orange-glass p-3 rounded mb-3">
            <div class="row g-2 align-items-end">
                <div class="col-12 col-md-2">
                    <label class="form-label">Tu usuario Habbo</label>
                    <input type="text" class="form-control" id="pet-habbo" required>
                </div>
                <div class="col-12 col-md-2">
                    <label class="form-label">Tipo</label>
                    <select class="form-select" id="pet-type" required>
                        <option value="Canción">Canción</option>
                        <option value="Grito">Grito</option>
                        <option value="Dedicatoria">Dedicatoria</option>
                        <option value="Saludo">Saludo</option>
                        <option value="Evento">Evento</option>
                        <option value="Chiste">Chiste</option>
                        <option value="Sorpresa">Sorpresa</option>
                    </select>
                </div>
                <div class="col-12 col-md-5">
                    <label class="form-label">Mensaje/Petición</label>
                    <input type="text" class="form-control" maxlength="90" id="pet-text" required>
                </div>
                <div class="col-12 col-md-2">
                    <button class="btn btn-success w-100" type="submit"><i class="fas fa-paper-plane"></i> Enviar</button>
                </div>
            </div>
        </form>
        <!-- Peticiones lista -->
        <div id="petitions-list"></div>
    </div>

    <!-- Panel DJ -->
    <div class="container dj-panel mb-4">
        <div class="section-title"><i class="fas fa-headphones"></i> Panel DJ</div>
        <div id="dj-session">
            <div id="dj-login-form">
                <input type="text" class="form-control mb-2" id="dj-user" placeholder="Usuario DJ">
                <input type="password" class="form-control mb-2" id="dj-pass" placeholder="Contraseña">
                <button class="btn btn-primary mb-2" onclick="djLogin()">Ingresar</button>
                <div>¿No tienes cuenta? <a href="#" onclick="showDjRegister();return false;">Regístrate aquí</a></div>
            </div>
            <div id="dj-register-form" style="display:none;">
                <input type="text" class="form-control mb-2" id="dj-reg-user" placeholder="Usuario DJ">
                <input type="password" class="form-control mb-2" id="dj-reg-pass" placeholder="Contraseña">
                <button class="btn btn-success mb-2" onclick="djRegister()">Registrar</button>
                <div>¿Ya tienes cuenta? <a href="#" onclick="showDjLogin();return false;">Ingresa aquí</a></div>
            </div>
            <div id="dj-panel-info" style="display:none;">
                <div class="mb-2">Bienvenido DJ <b id="dj-panel-name"></b></div>
                <button class="btn btn-danger btn-sm mb-2" onclick="djLogout()">Salir</button>
                <div>Hora MX: <span id="dj-hora-mx"></span></div>
            </div>
        </div>
        <div class="mt-3">
            <button class="btn btn-warning btn-sm" onclick="showPetitionsDj()">Ver Peticiones en Vivo</button>
            <button class="btn btn-success btn-sm" onclick="showStatsDj()">Ver Estadísticas Radio</button>
            <button class="btn btn-info btn-sm" onclick="showSongHistoryDj()">Ver Historial Canciones</button>
            <button class="btn btn-secondary btn-sm" onclick="showDjTools()">Herramientas DJ</button>
            <!-- Puedes añadir hasta 150 funciones aquí usando el mismo patrón de botón y sección oculta -->
        </div>
        <div class="mt-3" id="dj-tools-section" style="display:none;">
            <div class="alert alert-info py-2">Herramientas útiles para tus shows: <span class="badge bg-warning text-dark">¡Y muchas más próximamente!</span></div>
            <ul>
                <li>Botón para anunciar canción actual</li>
                <li>Botón para sorteo rápido entre oyentes</li>
                <li>Botón para enviar saludo random</li>
                <li>Botón para activar efectos de sonido</li>
                <li>Botón para subir encuesta en chat</li>
                <li>Panel de mensajes privados</li>
                <li>Panel para controlar volumen AutoDJ</li>
                <li>Botón para cambiar avatar DJ</li>
                <li>Botón para programar eventos futuros</li>
                <li>Ver ranking de oyentes activos</li>
                <!-- ...simula hasta 150 funciones útiles aquí con ideas -->
            </ul>
        </div>
        <div class="mt-3" id="dj-petitions-section" style="display:none;">
            <h6>Peticiones en Vivo</h6>
            <div id="dj-petitions-list"></div>
        </div>
        <div class="mt-3" id="dj-songhistory-section" style="display:none;">
            <h6>Historial Últimas Canciones</h6>
            <div id="dj-songhistory-list"></div>
        </div>
        <div class="mt-3" id="dj-stats-section" style="display:none;">
            <h6>Estadísticas</h6>
            <div id="dj-stats-list"></div>
        </div>
    </div>

    <!-- Panel Admin -->
    <div class="container admin-panel mb-4">
        <div class="section-title"><i class="fas fa-user-shield"></i> Panel Admin</div>
        <div>
            <button class="btn btn-danger btn-sm mb-2" onclick="showAdminTools()">Herramientas Admin</button>
            <div id="admin-tools-section" style="display:none;">
                <ul>
                    <li>Agregar/Remover DJs</li>
                    <li>Ver estadísticas del sitio</li>
                    <li>Gestión de noticias/eventos</li>
                    <li>Gestión de usuarios y rangos</li>
                    <li>Ver logs de actividad</li>
                    <li>Editar banner y anuncios</li>
                    <li>Gestión de equipo (fundadores, admins, etc)</li>
                    <!-- Simula muchas más funciones posibles aquí -->
                </ul>
            </div>
        </div>
    </div>

    <!-- Noticias, Eventos y Equipo -->
    <div class="container mb-4">
        <div class="row g-3">
            <div class="col-md-6">
                <div class="section-title"><i class="fas fa-newspaper"></i> Noticias</div>
                <div id="noticias-list"></div>
            </div>
            <div class="col-md-6">
                <div class="section-title"><i class="fas fa-calendar-alt"></i> Eventos</div>
                <div id="eventos-list"></div>
            </div>
        </div>
        <div class="mt-4">
            <div class="section-title"><i class="fas fa-users"></i> Nuestro Equipo</div>
            <div id="equipo-list" class="row g-2"></div>
        </div>
    </div>

    <!-- Widget Hora CDMX -->
    <div class="container my-4">
        <div style="text-align:center;padding:1em 0;">
            <h3>
                <a style="text-decoration:none;" href="https://www.zeitverschiebung.net/es/city/3530597" target="_blank">
                    <span style="color:gray;">Hora actual en</span><br />Mexico City, México
                </a>
            </h3>
            <iframe src="https://www.zeitverschiebung.net/clock-widget-iframe-v2?language=es&size=medium&timezone=America%2FMexico_City&show=hour_minute" width="100%" height="115" frameborder="0" seamless></iframe>
        </div>
    </div>

    <!-- Disclaimer y badge -->
    <footer class="container my-4 text-center">
        <img src="https://habsite.es/wp-content/uploads/2025/03/fansite_badge.gif" class="badge-habbo" alt="badge">
        <span>
            Hecho con ♥ por @estacionkusfm<br>
            Se respeta la manera Habbo. Todos los derechos reservados.<br>
            estacionkusfm no está afiliada a, respaldada, promocionada o aprobada específicamente por Sulake Corporation Oy o sus Afiliados.<br>
            Fansite Badge<br>
            De acuerdo a la Política de Webs fans de Habbo, esta radio puede utilizar las marcas comerciales y otras propiedades intelectuales de Habbo.
        </span>
    </footer>

    <!-- Bootstrap Bundle JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    <!-- Funciones del sitio -->
    <script>
    // --- Noticias y eventos demo ---
    const noticias = [
        { titulo:"¡Nuevo concurso!", contenido:"Participa y gana premios de verano.", fecha:"2025-06-10" },
        { titulo:"Temporada verano", contenido:"Disfruta nuestros eventos exclusivos.", fecha:"2025-06-11" }
    ];
    const eventos = [
        { titulo:"Fiesta de verano", contenido:"Gran fiesta en la playa Habbo.", fecha:"2025-06-15" },
        { titulo:"Noche de DJs", contenido:"Maratón de música en vivo.", fecha:"2025-06-13" }
    ];
    // --- Equipo demo ---
    const equipo = [
        { user:"Fundador", habbo:"KusFM", rol:"Fundador", img:"https://www.habbo.es/habbo-imaging/avatarimage?user=KusFM&head_direction=3&size=m" },
        { user:"Luisito", habbo:"luisitoys12", rol:"Administrador", img:"https://www.habbo.es/habbo-imaging/avatarimage?user=luisitoys12&head_direction=3&size=m" },
        { user:"Staff1", habbo:"HabboDJ1", rol:"DJ", img:"https://www.habbo.es/habbo-imaging/avatarimage?user=HabboDJ1&head_direction=3&size=m" },
        { user:"Staff2", habbo:"EventeroX", rol:"Eventero", img:"https://www.habbo.es/habbo-imaging/avatarimage?user=EventeroX&head_direction=3&size=m" },
        { user:"Staff3", habbo:"Reporterita", rol:"Reportero", img:"https://www.habbo.es/habbo-imaging/avatarimage?user=Reporterita&head_direction=3&size=m" },
        // ...simula más miembros aquí
    ];

    // --- Noticias/Equipo/Eventos render ---
    function renderNoticias() {
        let html = "";
        noticias.forEach(n => {
            html += `<div class="mb-2 bg-orange-glass p-2 rounded">
                        <b>${n.titulo}</b> <span class="text-muted">[${n.fecha}]</span>
                        <div>${n.contenido}</div>
                    </div>`;
        });
        document.getElementById('noticias-list').innerHTML = html;
    }
    function renderEventos() {
        let html = "";
        eventos.forEach(e => {
            html += `<div class="mb-2 bg-orange-glass p-2 rounded">
                        <b>${e.titulo}</b> <span class="text-muted">[${e.fecha}]</span>
                        <div>${e.contenido}</div>
                    </div>`;
        });
        document.getElementById('eventos-list').innerHTML = html;
    }
    function renderEquipo() {
        let html = "";
        equipo.forEach(m => {
            html += `<div class="col-12 col-md-4 team-member d-flex align-items-center">
                        <img src="${m.img}" width="55" class="me-2 avatar-habbo" alt="${m.habbo}">
                        <div>
                            <div><span class="team-role">${m.rol}</span> - <b>${m.user}</b></div>
                            <div><small>Habbo: ${m.habbo}</small></div>
                        </div>
                    </div>`;
        });
        document.getElementById('equipo-list').innerHTML = html;
    }

    // --- Peticiones ---
    let petitions = [];
    document.getElementById('petitionForm').onsubmit = function(e) {
        e.preventDefault();
        const usuario = document.getElementById('pet-habbo').value.trim();
        const tipo = document.getElementById('pet-type').value;
        const texto = document.getElementById('pet-text').value.trim();
        if(usuario && texto) {
            const pet = {
                usuario,
                tipo,
                texto,
                avatar:`https://www.habbo.es/habbo-imaging/avatarimage?user=${encodeURIComponent(usuario)}&head_direction=3&size=m`
            };
            petitions.push(pet);
            renderPetitions();
            this.reset();
        }
    };
    function renderPetitions() {
        let html = "";
        petitions.slice(-10).reverse().forEach(p => {
            html += `<div class="request-card d-flex align-items-center">
                        <img src="${p.avatar}" class="avatar-habbo me-2" width="40" alt="${p.usuario}">
                        <div>
                            <b>${p.usuario}</b> <span class="badge bg-info text-dark">${p.tipo}</span>
                            <div>${p.texto}</div>
                        </div>
                    </div>`;
        });
        document.getElementById('petitions-list').innerHTML = html;
        document.getElementById('dj-petitions-list').innerHTML = html;
    }

    // --- Panel DJ login/registro/session ---
    function showDjRegister() {
        document.getElementById('dj-login-form').style.display = "none";
        document.getElementById('dj-register-form').style.display = "block";
    }
    function showDjLogin() {
        document.getElementById('dj-register-form').style.display = "none";
        document.getElementById('dj-login-form').style.display = "block";
    }
    function djRegister() {
        const user = document.getElementById('dj-reg-user').value.trim();
        const pass = document.getElementById('dj-reg-pass').value;
        if(user && pass) {
            if(localStorage.getItem('dj_' + user)) {
                alert("Ese usuario ya está registrado.");
                return;
            }
            localStorage.setItem('dj_' + user, pass);
            alert("¡Registro exitoso!");
            showDjLogin();
        } else {
            alert("Completa todos los campos.");
        }
    }
    function djLogin() {
        const user = document.getElementById('dj-user').value.trim();
        const pass = document.getElementById('dj-pass').value;
        if(localStorage.getItem('dj_' + user) === pass && user && pass) {
            localStorage.setItem('dj_session', user);
            showDjPanel(user);
        } else {
            alert("Usuario o contraseña incorrectos.");
        }
    }
    function showDjPanel(user) {
        document.getElementById('dj-login-form').style.display = "none";
        document.getElementById('dj-register-form').style.display = "none";
        document.getElementById('dj-panel-info').style.display = "block";
        document.getElementById('dj-panel-name').textContent = user;
        updateHoraDj();
    }
    function djLogout() {
        localStorage.removeItem('dj_session');
        document.getElementById('dj-panel-info').style.display = "none";
        showDjLogin();
    }
    function updateHoraDj() {
        const now = new Date();
        let utc = now.getTime() + (now.getTimezoneOffset() * 60000);
        let horaMX = new Date(utc + (3600000 * -6));
        document.getElementById('dj-hora-mx').textContent = horaMX.toLocaleTimeString('es-MX', { hour: '2-digit', minute: '2-digit' });
    }
    setInterval(() => {
        if(document.getElementById('dj-panel-info').style.display === "block") updateHoraDj();
    }, 60000);

    // --- Secciones DJ Panel ---
    function showPetitionsDj() {
        document.getElementById('dj-petitions-section').style.display = "";
        document.getElementById('dj-songhistory-section').style.display = "none";
        document.getElementById('dj-stats-section').style.display = "none";
        document.getElementById('dj-tools-section').style.display = "none";
    }
    function showSongHistoryDj() {
        document.getElementById('dj-songhistory-section').style.display = "";
        document.getElementById('dj-petitions-section').style.display = "none";
        document.getElementById('dj-stats-section').style.display = "none";
        document.getElementById('dj-tools-section').style.display = "none";
        // Demo historial canciones
        document.getElementById('dj-songhistory-list').innerHTML = "<ul><li>Canción 1</li><li>Canción 2</li><li>Canción 3</li></ul>";
    }
    function showStatsDj() {
        document.getElementById('dj-stats-section').style.display = "";
        document.getElementById('dj-petitions-section').style.display = "none";
        document.getElementById('dj-songhistory-section').style.display = "none";
        document.getElementById('dj-tools-section').style.display = "none";
        // Demo stats
        document.getElementById('dj-stats-list').innerHTML = "<b>Oyentes:</b> 25 <br><b>Pico hoy:</b> 120 <br><b>Canciones:</b> 300";
    }
    function showDjTools() {
        document.getElementById('dj-tools-section').style.display = "";
        document.getElementById('dj-petitions-section').style.display = "none";
        document.getElementById('dj-songhistory-section').style.display = "none";
        document.getElementById('dj-stats-section').style.display = "none";
    }

    // --- Panel Admin funciones demo ---
    function showAdminTools() {
        let sec = document.getElementById('admin-tools-section');
        sec.style.display = sec.style.display === "none" ? "" : "none";
    }

    // --- Player radio demo (personaliza esto con tu backend real o API radio) ---
    let playing = false;
    const audio = document.getElementById('player_audio');
    document.getElementById('btnPlay').onclick = function() {
        if(!playing) {
            audio.play();
            playing = true;
            this.innerHTML = '<i class="fas fa-pause"></i>';
        } else {
            audio.pause();
            playing = false;
            this.innerHTML = '<i class="fas fa-play"></i>';
        }
    };
    document.getElementById('btnMute').onclick = function() {
        audio.muted = !audio.muted;
        this.innerHTML = audio.muted ? '<i class="fas fa-volume-mute"></i>' : '<i class="fas fa-volume-up"></i>';
    };
    document.getElementById('volume-slider').oninput = function() {
        audio.volume = this.value / 100;
    };

    // --- Render inicial y login persistente DJ ---
    window.onload = function() {
        renderNoticias();
        renderEventos();
        renderEquipo();
        renderPetitions();
        // DJ login persistente
        const session = localStorage.getItem('dj_session');
        if(session) showDjPanel(session);
        else showDjLogin();
    };
    </script>
</body>
</html>
